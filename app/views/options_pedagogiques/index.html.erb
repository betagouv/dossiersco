<section class="section">
  <h1>Carte des formations</h1>

  <div class="text-right">
    <%= link_to t('.nouveau_mef'), new_configuration_mef_path, {class: 'button-outline primary'} %>
  </div>

  <div id="dashboard" class="dashboard">
    <aside class="side-menu" role="navigation">
      <ul>
        <% @mefs.each_with_index do |mef, index| %>
          <li><a class="<%= 'active' if index == 0 %> lien-section" data-target="#<%= mef.id %>"><%= mef.libelle %></a></li>
        <% end %>
      </ul>
    </aside>
    <% @mefs.each_with_index do |mef, index| %>

      <div class="main <%= 'hide' if index > 0 %>" id="<%= mef.id %>">
        <div class="panel">
          <div class="panel__header">
            <h3><%= mef.libelle %></h3>
          </div>
          <div class="cards">
            <table class="table">
              <tbody data-mef-id="<%= mef.id %>">
              <% mef.options_pedagogiques.each do |option| %>
                <tr class="small-line" data-option-id="<%= option.id %>">
                  <td><%= "#{option.nom} #{option.groupe} " %></td>
                  <td><%= select_tag "people", "<option>Abandonnable</option><option>Non abandonnable</option>".html_safe %></td>
                  <td><%= link_to t('.modifier'), edit_option_pedagogique_path(option) %></td>
                  <td><%= link_to enleve_option_au_mef_option_pedagogique_path(id: option.id, mef: mef.id), method: :delete, remote: true do %><i class='fas fa-times'></i><% end %></td>
                </tr>
              <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</section>

<script type="text/javascript" charset="utf-8">
  // Onglets
  $(document).ready(function() {
    $('.lien-section').click(function() {
      const target = $(this).data('target')
      $('.lien-section').removeClass('active')
      $(this).addClass('active')
      $('.main').addClass('hide')
      $(target).removeClass('hide')
    })
  })
</script>